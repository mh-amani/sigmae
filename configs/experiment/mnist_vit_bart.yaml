# @package _global_

defaults:
  - example
  - override /data: image
  - override /data/dataset: image/mnist_dataset
  - override /model: vit_softmax_bart_cont

trainer:
  min_epochs: 50
  max_epochs: 100

callbacks:
  supervision_scheduler:
    scheduler_xz: 
      hp_init: 0.0
      hp_end: 0.0
    scheduler_z:
      hp_init: 1.0
      hp_end: 1.0
  model_checkpoint:
    monitor: ${model.model_params.monitor}
  early_stopping:
    monitor: ${model.model_params.monitor}

data:
  supervision_ratio: [0, 1.00]
  batch_size: 128

model:
  optimizer:
    lr: 0.0001
    
  model_params:
    # to be manually set
    x_vocab_size: 17
    z_patch_size: 16
    max_x_length: 10
    max_z_length: 50
    image_size: 28
    d_model: 512
    processor:
      image_mean: 0.5
      image_std: 0.5
      image_size: 28
    monitor: 'val/loss'
  
  models_config:
    sequence_model_xz:
      model:
        config:
          vocab_size: ${model.model_params.x_vocab_size}
          # max_position_embeddings: ${input_max_position_embeddings}

      tokenizer: null
  scheduler:
    scheduler_config:
      monitor: ${model.model_params.monitor}